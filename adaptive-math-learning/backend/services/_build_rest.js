const fs = require("fs");
const NL = String.fromCharCode(10);
const DQ = String.fromCharCode(34);
let py = "";
function ln(text) { py += (text || "") + NL; }
function raw(text) { py += text; }

py += Buffer.from("CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFRleHRUb1NwZWVjaFNlcnZpY2UKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNsYXNzIFRleHRUb1NwZWVjaFNlcnZpY2U6CiAgICAiIiJDb252ZXJ0cyB0ZXh0IHRvIHNwZWVjaCBmb3IgYWNjZXNzaWJpbGl0eS4iIiIKCiAgICBTVVBQT1JURURfTEFOR1VBR0VTOiBMaXN0W3N0cl0gPSBbInRyIiwgImVuIiwgImt1IiwgImFyIl0KICAgIF9UVFNfQkFTRV9VUkw6IHN0ciA9ICJodHRwczovL2Nkbi5tYXRobGVhcm4uZXhhbXBsZS5jb20vdHRzIgoKICAgIGRlZiBnZW5lcmF0ZV9zcGVlY2goc2VsZiwgdGV4dDogc3RyLCBsYW5ndWFnZTogc3RyID0gInRyIikgLT4gU3BlZWNoUmVzdWx0OgogICAgICAgICIiIkNvbnZlcnQgdGV4dCB0byBhbiBhdWRpbyBVUkwgdmlhIFRUUyBwcm92aWRlciAocGxhY2Vob2xkZXIpLiIiIgogICAgICAgIGlmIGxhbmd1YWdlIG5vdCBpbiBzZWxmLlNVUFBPUlRFRF9MQU5HVUFHRVM6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJEZXN0ZWtsZW5tZXllbiBkaWw6IHtsYW5ndWFnZX0iKQogICAgICAgIHRleHRfaGFzaCA9IGhhc2hsaWIuc2hhMjU2KGYie2xhbmd1YWdlfTp7dGV4dH0iLmVuY29kZSgidXRmLTgiKSkuaGV4ZGlnZXN0KClbOjE2XQogICAgICAgIGF1ZGlvX3VybCA9IGYie3NlbGYuX1RUU19CQVNFX1VSTH0ve2xhbmd1YWdlfS97dGV4dF9oYXNofS5tcDMiCiAgICAgICAgd29yZF9jb3VudCA9IGxlbih0ZXh0LnNwbGl0KCkpCiAgICAgICAgZXN0aW1hdGVkX2R1cmF0aW9uID0gbWF4KDEuMCwgd29yZF9jb3VudCAvIDIuNSkKICAgICAgICByZXR1cm4gU3BlZWNoUmVzdWx0KAogICAgICAgICAgICBhdWRpb191cmw9YXVkaW9fdXJsLAogICAgICAgICAgICBkdXJhdGlvbl9zZWNvbmRzPXJvdW5kKGVzdGltYXRlZF9kdXJhdGlvbiwgMSksCiAgICAgICAgICAgIGxhbmd1YWdlPWxhbmd1YWdlLAogICAgICAgICAgICB0ZXh0X2hhc2g9dGV4dF9oYXNoLAogICAgICAgICkKCiAgICBkZWYgcmVhZF9xdWVzdGlvbihzZWxmLCBxdWVzdGlvbl9kYXRhOiBEaWN0W3N0ciwgQW55XSkgLT4gU3BlZWNoUmVzdWx0OgogICAgICAgICIiIlJlYWQgYSBtYXRocyBxdWVzdGlvbiBhbG91ZC4iIiIKICAgICAgICBwYXJ0czogTGlzdFtzdHJdID0gW10KICAgICAgICB0ZXh0ID0gcXVlc3Rpb25fZGF0YS5nZXQoInRleHQiLCAiIikKICAgICAgICBpZiBub3QgdGV4dDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiU29ydSB2ZXJpc2kgdGV4dCBhbGFuaSBpY2VybWVsaWRpci4iKQogICAgICAgIHBhcnRzLmFwcGVuZChmIlNvcnU6IHt0ZXh0fSIpCiAgICAgICAgb3B0aW9uczogT3B0aW9uYWxbTGlzdFtzdHJdXSA9IHF1ZXN0aW9uX2RhdGEuZ2V0KCJvcHRpb25zIikKICAgICAgICBpZiBvcHRpb25zOgogICAgICAgICAgICBsYWJlbHMgPSBbIkEiLCAiQiIsICJDIiwgIkQiLCAiRSJdCiAgICAgICAgICAgIGZvciBpZHgsIG9wdGlvbiBpbiBlbnVtZXJhdGUob3B0aW9ucyk6CiAgICAgICAgICAgICAgICBsYWJlbCA9IGxhYmVsc1tpZHhdIGlmIGlkeCA8IGxlbihsYWJlbHMpIGVsc2Ugc3RyKGlkeCArIDEpCiAgICAgICAgICAgICAgICBwYXJ0cy5hcHBlbmQoZiJTZWNlbmVrIHtsYWJlbH06IHtvcHRpb259IikKICAgICAgICBoaW50OiBPcHRpb25hbFtzdHJdID0gcXVlc3Rpb25fZGF0YS5nZXQoImhpbnQiKQogICAgICAgIGlmIGhpbnQ6CiAgICAgICAgICAgIHBhcnRzLmFwcGVuZChmIklwdWN1OiB7aGludH0iKQogICAgICAgIGxhbmd1YWdlID0gcXVlc3Rpb25fZGF0YS5nZXQoImxhbmd1YWdlIiwgInRyIikKICAgICAgICBmdWxsX3RleHQgPSAiLiAiLmpvaW4ocGFydHMpCiAgICAgICAgcmV0dXJuIHNlbGYuZ2VuZXJhdGVfc3BlZWNoKGZ1bGxfdGV4dCwgbGFuZ3VhZ2U9bGFuZ3VhZ2UpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZ2V0X3N1cHBvcnRlZF9sYW5ndWFnZXMoY2xzKSAtPiBMaXN0W3N0cl06CiAgICAgICAgIiIiUmV0dXJuIHRoZSBsaXN0IG9mIFRUUy1zdXBwb3J0ZWQgbGFuZ3VhZ2UgY29kZXMuIiIiCiAgICAgICAgcmV0dXJuIFsidHIiLCAiZW4iLCAia3UiLCAiYXIiXQo=", "base64").toString("utf8");
py += Buffer.from("CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEFjY2Vzc2liaWxpdHlTZXR0aW5ncwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKY2xhc3MgQWNjZXNzaWJpbGl0eVNldHRpbmdzOgogICAgIiIiTWFuYWdlcyBwZXItdXNlciBhY2Nlc3NpYmlsaXR5IHByZWZlcmVuY2UgcHJvZmlsZXMuIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fc3RvcmU6IERpY3Rbc3RyLCBBY2Nlc3NpYmlsaXR5UHJlZmVyZW5jZXNdID0ge30KCiAgICBkZWYgZ2V0X3NldHRpbmdzKHNlbGYsIHVzZXJfaWQ6IHN0cikgLT4gQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzOgogICAgICAgICIiIlJldHVybiB1c2VyIGFjY2Vzc2liaWxpdHkgcHJlZmVyZW5jZXMgKGNyZWF0ZXMgZGVmYXVsdHMgaWYgbm9uZSkuIiIiCiAgICAgICAgaWYgdXNlcl9pZCBub3QgaW4gc2VsZi5fc3RvcmU6CiAgICAgICAgICAgIHNlbGYuX3N0b3JlW3VzZXJfaWRdID0gQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzKHVzZXJfaWQ9dXNlcl9pZCkKICAgICAgICByZXR1cm4gc2VsZi5fc3RvcmVbdXNlcl9pZF0KCiAgICBkZWYgdXBkYXRlX3NldHRpbmdzKHNlbGYsIHVzZXJfaWQ6IHN0ciwgc2V0dGluZ3M6IERpY3Rbc3RyLCBBbnldKSAtPiBBY2Nlc3NpYmlsaXR5UHJlZmVyZW5jZXM6CiAgICAgICAgIiIiVXBkYXRlIG9uZSBvciBtb3JlIGFjY2Vzc2liaWxpdHkgcHJlZmVyZW5jZXMgZm9yIHVzZXJfaWQuIiIiCiAgICAgICAgY3VycmVudCA9IHNlbGYuZ2V0X3NldHRpbmdzKHVzZXJfaWQpCiAgICAgICAgX2ZpZWxkX21hcDogRGljdFtzdHIsIEFueV0gPSB7CiAgICAgICAgICAgICJmb250X3NpemUiOiBpbnQsICJoaWdoX2NvbnRyYXN0IjogYm9vbCwKICAgICAgICAgICAgImR5c2xleGlhX2ZvbnQiOiBsYW1iZGEgdjogRHlzbGV4aWFGb250KHYpIGlmIGlzaW5zdGFuY2Uodiwgc3RyKSBlbHNlIHYsCiAgICAgICAgICAgICJjb2xvcl9ibGluZF9tb2RlIjogbGFtYmRhIHY6IENvbG9yQmxpbmRNb2RlKHYpIGlmIGlzaW5zdGFuY2Uodiwgc3RyKSBlbHNlIHYsCiAgICAgICAgICAgICJzY3JlZW5fcmVhZGVyX21vZGUiOiBib29sLCAicmVkdWNlZF9tb3Rpb24iOiBib29sLAogICAgICAgICAgICAibGFuZ3VhZ2UiOiBzdHIsICJhdXRvX3JlYWRfcXVlc3Rpb25zIjogYm9vbCwKICAgICAgICAgICAgImV4dHJhX3RpbWVfbXVsdGlwbGllciI6IGZsb2F0LCAic2ltcGxpZmllZF91aSI6IGJvb2wsCiAgICAgICAgICAgICJ0ZXh0X3NwYWNpbmciOiBmbG9hdCwgImN1cnNvcl9zaXplIjogc3RyLAogICAgICAgIH0KICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBzZXR0aW5ncy5pdGVtcygpOgogICAgICAgICAgICBpZiBrZXkgaW4gX2ZpZWxkX21hcDoKICAgICAgICAgICAgICAgIGNvbnZlcnRlciA9IF9maWVsZF9tYXBba2V5XQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGNvbnZlcnRlcih2YWx1ZSkKICAgICAgICAgICAgICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgS2V5RXJyb3IpIGFzIGV4YzoKICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiR2VjZXJzaXogZGVnZXI6IHtrZXl9PXt2YWx1ZSFyfSIpIGZyb20gZXhjCiAgICAgICAgICAgICAgICBzZXRhdHRyKGN1cnJlbnQsIGtleSwgY29udmVydGVkKQogICAgICAgIGN1cnJlbnQuX19wb3N0X2luaXRfXygpCiAgICAgICAgY3VycmVudC51cGRhdGVkX2F0ID0gZGF0ZXRpbWUudXRjbm93KCkuaXNvZm9ybWF0KCkKICAgICAgICBzZWxmLl9zdG9yZVt1c2VyX2lkXSA9IGN1cnJlbnQKICAgICAgICByZXR1cm4gY3VycmVudAoKICAgIGRlZiByZXNldF9zZXR0aW5ncyhzZWxmLCB1c2VyX2lkOiBzdHIpIC0+IEFjY2Vzc2liaWxpdHlQcmVmZXJlbmNlczoKICAgICAgICAiIiJSZXNldCBwcmVmZXJlbmNlcyB0byBkZWZhdWx0cy4iIiIKICAgICAgICBkZWZhdWx0cyA9IEFjY2Vzc2liaWxpdHlQcmVmZXJlbmNlcyh1c2VyX2lkPXVzZXJfaWQpCiAgICAgICAgc2VsZi5fc3RvcmVbdXNlcl9pZF0gPSBkZWZhdWx0cwogICAgICAgIHJldHVybiBkZWZhdWx0cwoKICAgIGRlZiBnZXRfY3NzX292ZXJyaWRlcyhzZWxmLCB1c2VyX2lkOiBzdHIpIC0+IERpY3Rbc3RyLCBzdHJdOgogICAgICAgICIiIkdlbmVyYXRlIENTUyBjdXN0b20tcHJvcGVydHkgb3ZlcnJpZGVzIGZvciB0aGUgZnJvbnQtZW5kLiIiIgogICAgICAgIHByZWZzID0gc2VsZi5nZXRfc2V0dGluZ3ModXNlcl9pZCkKICAgICAgICBjc3M6IERpY3Rbc3RyLCBzdHJdID0gewogICAgICAgICAgICAiLS1tbC1mb250LXNpemUiOiBmIntwcmVmcy5mb250X3NpemV9cHgiLAogICAgICAgICAgICAiLS1tbC1saW5lLWhlaWdodCI6IHN0cihwcmVmcy50ZXh0X3NwYWNpbmcpLAogICAgICAgICAgICAiLS1tbC1jdXJzb3Itc2l6ZSI6IHByZWZzLmN1cnNvcl9zaXplLAogICAgICAgIH0KICAgICAgICBpZiBwcmVmcy5oaWdoX2NvbnRyYXN0OgogICAgICAgICAgICBjc3NbIi0tbWwtYmctY29sb3IiXSA9ICIjMDAwMDAwIgogICAgICAgICAgICBjc3NbIi0tbWwtdGV4dC1jb2xvciJdID0gIiNGRkZGRkYiCiAgICAgICAgICAgIGNzc1siLS1tbC1hY2NlbnQtY29sb3IiXSA9ICIjRkZENzAwIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNzc1siLS1tbC1iZy1jb2xvciJdID0gIiNGRkZGRkYiCiAgICAgICAgICAgIGNzc1siLS1tbC10ZXh0LWNvbG9yIl0gPSAiIzFBMUEyRSIKICAgICAgICAgICAgY3NzWyItLW1sLWFjY2VudC1jb2xvciJdID0gIiM0MzYxRUUiCiAgICAgICAgaWYgcHJlZnMuZHlzbGV4aWFfZm9udCAhPSBEeXNsZXhpYUZvbnQuREVGQVVMVDoKICAgICAgICAgICAgY3NzWyItLW1sLWZvbnQtZmFtaWx5Il0gPSBmIid7cHJlZnMuZHlzbGV4aWFfZm9udC52YWx1ZX0nLCBzYW5zLXNlcmlmIgogICAgICAgIGlmIHByZWZzLmNvbG9yX2JsaW5kX21vZGUgPT0gQ29sb3JCbGluZE1vZGUuUFJPVEFOT1BJQToKICAgICAgICAgICAgY3NzWyItLW1sLXN1Y2Nlc3MtY29sb3IiXSA9ICIjMDA3MkIyIgogICAgICAgICAgICBjc3NbIi0tbWwtZXJyb3ItY29sb3IiXSA9ICIjRDU1RTAwIgogICAgICAgIGVsaWYgcHJlZnMuY29sb3JfYmxpbmRfbW9kZSA9PSBDb2xvckJsaW5kTW9kZS5ERVVURVJBTk9QSUE6CiAgICAgICAgICAgIGNzc1siLS1tbC1zdWNjZXNzLWNvbG9yIl0gPSAiIzAwNzJCMiIKICAgICAgICAgICAgY3NzWyItLW1sLWVycm9yLWNvbG9yIl0gPSAiI0NDNzlBNyIKICAgICAgICBlbGlmIHByZWZzLmNvbG9yX2JsaW5kX21vZGUgPT0gQ29sb3JCbGluZE1vZGUuVFJJVEFOT1BJQToKICAgICAgICAgICAgY3NzWyItLW1sLXN1Y2Nlc3MtY29sb3IiXSA9ICIjMDA5RTczIgogICAgICAgICAgICBjc3NbIi0tbWwtZXJyb3ItY29sb3IiXSA9ICIjRDU1RTAwIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNzc1siLS1tbC1zdWNjZXNzLWNvbG9yIl0gPSAiIzJFQ0M3MSIKICAgICAgICAgICAgY3NzWyItLW1sLWVycm9yLWNvbG9yIl0gPSAiI0U3NEMzQyIKICAgICAgICBpZiBwcmVmcy5yZWR1Y2VkX21vdGlvbjoKICAgICAgICAgICAgY3NzWyItLW1sLXRyYW5zaXRpb24tZHVyYXRpb24iXSA9ICIwcyIKICAgICAgICAgICAgY3NzWyItLW1sLWFuaW1hdGlvbiJdID0gIm5vbmUiCiAgICAgICAgcmV0dXJuIGNzcwo=", "base64").toString("utf8");
